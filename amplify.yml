version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Enable corepack for modern package managers
        - corepack enable
        # Install dependencies using nypm (universal package manager)
        - npx --yes nypm i
    build:
      commands:
        # Build the Nuxt 3 application
        - npm run build
  artifacts:
    # IMPORTANT - Nuxt 3 builds to .output/public directory
    baseDirectory: .output/public
    files:
      - '**/*'
  cache:
    paths:
      # Cache node_modules for faster builds
      - node_modules/**/*
      # Cache .nuxt build cache
      - .nuxt/**/*