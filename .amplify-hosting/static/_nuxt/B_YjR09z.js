import{_ as S}from"./B8aq_QmG.js";import{c as d,o as l,a as t,q as $,z as L,r as h,E as V,e as D,k as i,b as r,w as g,t as n,s,m as v,d as u}from"#entry";import{u as B}from"./C4JpkZNp.js";import{r as M}from"./17oaNzG6.js";import{r as N}from"./QJyqa3i7.js";import{r as w}from"./DBrhDGOf.js";import{r as q}from"./BreoAuwB.js";import{r as A}from"./DW5NWq0j.js";import{r as j}from"./Bi0YyG7H.js";import{r as P}from"./BKE9UY2T.js";import"./DMoW-9xf.js";function Z(k,p){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}const z={class:"min-h-screen bg-gray-50"},F={class:"bg-white shadow-sm border-b border-gray-200"},I={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},T={class:"py-4 lg:py-6"},R={class:"flex items-center justify-between"},G={class:"flex items-center space-x-3"},H={class:"text-xl sm:text-2xl font-bold text-gray-900"},J={key:0,class:"flex space-x-3"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},O={key:0,class:"flex items-center justify-center py-12"},Q={key:1,class:"text-center py-12"},U={key:2,class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},X={class:"bg-white p-6 rounded-xl border border-gray-200"},Y={class:"flex items-center"},tt={class:"flex-shrink-0"},et={class:"ml-4"},st={class:"text-2xl font-semibold text-gray-900"},at={class:"bg-white p-6 rounded-xl border border-gray-200"},ot={class:"flex items-center"},rt={class:"flex-shrink-0"},nt={class:"ml-4"},dt={class:"text-2xl font-semibold text-gray-900"},lt={class:"bg-white p-6 rounded-xl border border-gray-200"},it={class:"flex items-center"},ct={class:"flex-shrink-0"},mt={class:"ml-4"},xt={class:"text-2xl font-semibold text-gray-900"},gt={class:"bg-white p-6 rounded-xl border border-gray-200"},ut={class:"flex items-center"},pt={class:"flex-shrink-0"},_t={class:"ml-4"},ft={class:"text-2xl font-semibold text-gray-900"},yt={class:"bg-white rounded-xl border border-gray-200 p-6"},bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ht={class:"mt-1 text-sm text-gray-900"},vt={key:0},wt={class:"mt-1 text-sm text-gray-900"},kt={key:1},Ct={class:"mt-1 text-sm text-gray-900"},Et={class:"mt-1"},St={class:"bg-white rounded-xl border border-gray-200 p-6"},$t={class:"text-center py-8"},zt=$({__name:"[id]",setup(k){const p=L(),{supabase:_}=B(),a=h(null),c=h(!0),f=V(()=>p.params.id),C=async()=>{c.value=!0;try{const{data:o,error:e}=await _.from("campaigns").select("*").eq("id",f.value).single();if(e)throw e;a.value=o}catch(o){console.error("Error cargando campaña:",o),a.value=null}finally{c.value=!1}},y=o=>({draft:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",sending:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",paused:"bg-orange-100 text-orange-800",cancelled:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",b=o=>({draft:"Borrador",scheduled:"Programada",sending:"Enviando",sent:"Enviada",paused:"Pausada",cancelled:"Cancelada"})[o]||o,m=o=>new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=async()=>{if(confirm(`¿Enviar la campaña "${a.value.name}"?`))try{const{error:o}=await _.from("campaigns").update({status:"sending"}).eq("id",f.value);if(o)throw o;a.value.status="sending",alert("Campaña enviada exitosamente")}catch(o){console.error("Error enviando campaña:",o),alert("Error al enviar la campaña")}};return D(()=>{C()}),(o,e)=>{const x=S;return l(),d("div",z,[t("div",F,[t("div",I,[t("div",T,[t("div",R,[t("div",null,[t("div",G,[r(x,{to:"/campaigns",class:"text-gray-400 hover:text-gray-600"},{default:g(()=>[r(s(M),{class:"h-5 w-5"})]),_:1}),t("h1",H,n(s(a)?.name||"Cargando..."),1),s(a)?(l(),d("span",{key:0,class:v([y(s(a).status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},n(b(s(a).status)),3)):i("",!0)]),e[0]||(e[0]=t("p",{class:"mt-1 text-sm text-gray-500"}," Detalles y estadísticas de la campaña ",-1))]),s(a)?(l(),d("div",J,[r(x,{to:`/campaigns/new?id=${s(a).id}`,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>[r(s(N),{class:"h-4 w-4 mr-2"}),e[1]||(e[1]=u(" Editar ",-1))]),_:1},8,["to"]),s(a).status==="draft"?(l(),d("button",{key:0,onClick:E,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700"},[r(s(w),{class:"h-4 w-4 mr-2"}),e[2]||(e[2]=u(" Enviar Campaña ",-1))])):i("",!0)])):i("",!0)])])])]),t("div",K,[s(c)?(l(),d("div",O,[...e[3]||(e[3]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},null,-1)])])):s(a)?(l(),d("div",U,[t("div",W,[t("div",X,[t("div",Y,[t("div",tt,[r(s(A),{class:"h-8 w-8 text-blue-600"})]),t("div",et,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Contactos",-1)),t("p",st,n(s(a).total_contacts?.toLocaleString()||0),1)])])]),t("div",at,[t("div",ot,[t("div",rt,[r(s(w),{class:"h-8 w-8 text-green-600"})]),t("div",nt,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Enviados",-1)),t("p",dt,n(s(a).sent_count?.toLocaleString()||0),1)])])]),t("div",lt,[t("div",it,[t("div",ct,[r(s(j),{class:"h-8 w-8 text-purple-600"})]),t("div",mt,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Entregados",-1)),t("p",xt,n(s(a).delivered_count?.toLocaleString()||0),1)])])]),t("div",gt,[t("div",ut,[t("div",pt,[r(s(P),{class:"h-8 w-8 text-orange-600"})]),t("div",_t,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-500"},"Abiertos",-1)),t("p",ft,n(s(a).opened_count?.toLocaleString()||0),1)])])])]),t("div",yt,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Información de la Campaña",-1)),t("dl",bt,[t("div",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha de Creación",-1)),t("dd",ht,n(m(s(a).created_at)),1)]),s(a).sent_at?(l(),d("div",vt,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500"},"Fecha de Envío",-1)),t("dd",wt,n(m(s(a).sent_at)),1)])):i("",!0),s(a).scheduled_at?(l(),d("div",kt,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500"},"Programada para",-1)),t("dd",Ct,n(m(s(a).scheduled_at)),1)])):i("",!0),t("div",null,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500"},"Estado",-1)),t("dd",Et,[t("span",{class:v([y(s(a).status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},n(b(s(a).status)),3)])])])]),t("div",St,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Análisis Detallado",-1)),t("div",$t,[r(s(Z),{class:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e[16]||(e[16]=t("p",{class:"text-gray-500"},"Análisis detallado en desarrollo",-1))])])])):(l(),d("div",Q,[r(s(q),{class:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e[5]||(e[5]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Campaña no encontrada",-1)),e[6]||(e[6]=t("p",{class:"text-gray-500 mb-4"},"La campaña que buscas no existe o fue eliminada",-1)),r(x,{to:"/campaigns",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700"},{default:g(()=>[...e[4]||(e[4]=[u(" Volver a Campañas ",-1)])]),_:1})]))])])}}});export{zt as default};
