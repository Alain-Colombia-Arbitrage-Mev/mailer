import{u as t}from"./DMoW-9xf.js";import{$ as u,C as l}from"#entry";const E=()=>{const n=t(),i=u(),a=l(),c="https://hxmdzhkkuhsetqucbpia.supabase.co";return console.log("🔧 SUPABASE MASTER: Verificando configuración"),console.log("📍 URL configurada:",a.public.supabaseUrl),console.log("📍 URL esperada:",c),a.public.supabaseUrl!==c&&console.warn("⚠️ URL de Supabase no coincide con la esperada"),{supabase:n,user:i,async sendMagicLink(e){console.log("📧 MASTER: Enviando Magic Link a:",e);try{let r="http://localhost:3000/auth/callback";typeof window<"u"&&(r=`${window.location.origin}/auth/callback`);const{data:s,error:o}=await n.auth.signInWithOtp({email:e,options:{emailRedirectTo:r}});return o?(console.error("❌ MASTER: Error enviando Magic Link:",o),{success:!1,error:o.message}):(console.log("✅ MASTER: Magic Link enviado exitosamente"),{success:!0,data:s})}catch(r){return console.error("💥 MASTER: Error al enviar Magic Link:",r),{success:!1,error:r.message}}},async signInWithPassword(e,r){console.log("🔐 MASTER: Autenticando con contraseña para:",e);try{const{data:s,error:o}=await n.auth.signInWithPassword({email:e,password:r});return o?(console.error("❌ MASTER: Error de autenticación:",o),{success:!1,error:o.message}):(console.log("✅ MASTER: Autenticación exitosa"),console.log("👤 MASTER: Usuario:",s.user?.email),{success:!0,data:s,user:s.user,session:s.session})}catch(s){return console.error("💥 MASTER: Error al autenticar:",s),{success:!1,error:s.message}}},async signOut(){console.log("🚪 MASTER: Cerrando sesión...");try{const{error:e}=await n.auth.signOut();return e?(console.error("❌ MASTER: Error cerrando sesión:",e),{success:!1,error:e.message}):(console.log("✅ MASTER: Sesión cerrada exitosamente"),{success:!0})}catch(e){return console.error("💥 MASTER: Error al cerrar sesión:",e),{success:!1,error:e.message}}},async testConnection(){console.log("🧪 MASTER: Probando conexión..."),console.log("📍 MASTER: URL configurada:",a.public.supabaseUrl);try{const{data:e,error:r}=await n.from("email_templates").select("id, name").limit(1);return r?(console.error("❌ MASTER: Error de conexión:",r),{success:!1,error:r.message}):(console.log("✅ MASTER: Conexión exitosa"),{success:!0,data:e})}catch(e){return console.error("💥 MASTER: Error al probar conexión:",e),{success:!1,error:e.message}}},isSuperUser(e){return(e||i.value?.email)==="info@be-mindpower.net"},verifyConfig(){return{url:a.public.supabaseUrl,keyPreview:a.public.supabaseAnonKey?.substring(0,30)+"...",isCorrect:a.public.supabaseUrl===c,isMaster:!0}}}};export{E as u};
