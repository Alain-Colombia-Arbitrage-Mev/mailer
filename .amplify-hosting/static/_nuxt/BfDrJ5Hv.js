import{q as M,r as p,c as a,o as l,a as s,i as P,k as i,s as e,t as r,m as E,l as f,v as S,x as V,j as R,y as C,F as I,g as A}from"#entry";const H={class:"min-h-screen bg-gray-50 p-8"},j={class:"max-w-4xl mx-auto"},q={class:"bg-white p-6 rounded-lg shadow mb-6"},B=["disabled"],D={class:"font-semibold"},U={key:0,class:"text-sm mt-1"},N={class:"bg-white p-6 rounded-lg shadow mb-6"},O={class:"flex gap-4 items-end"},W={class:"flex-1"},L=["disabled"],$={class:"font-semibold"},F={key:0,class:"text-sm mt-1"},z={key:1,class:"text-sm mt-1"},J={key:2,class:"text-sm mt-1"},K={class:"bg-white p-6 rounded-lg shadow mb-6"},X={class:"flex items-center"},Z=["disabled"],G={class:"font-semibold"},Q={key:0,class:"text-sm mt-1"},Y={key:1,class:"text-sm mt-1"},ee={class:"bg-white p-6 rounded-lg shadow mb-6"},se=["disabled"],te={class:"font-semibold"},oe={key:0,class:"mt-2 text-sm"},ae={class:"list-disc list-inside"},le={key:1,class:"text-sm mt-2"},re={key:2,class:"text-sm mt-2"},de=M({__name:"test-smtp",setup(ie){const x=p(!1),v=p(!1),y=p(!1),h=p(!1),b=p(null),c=p(null),m=p(null),n=p(null),g=p(""),d=p({to:"",subject:"Email de prueba SMTP - BMP",content:"<h1>¬°Hola!</h1><p>Este es un email de prueba enviado desde el sistema SMTP de Be-Mindpower.</p><p>Si recibes este mensaje, la configuraci√≥n SMTP est√° funcionando correctamente.</p>",isHtml:!0}),w=async()=>{x.value=!0,b.value=null;try{const o=await $fetch("/api/smtp/test-connection",{method:"POST"});b.value=o}catch(o){b.value={success:!1,error:o.data?.message||o.message||"Error desconocido"}}finally{x.value=!1}},k=async()=>{v.value=!0,c.value=null;try{const o=await $fetch("/api/emails/send",{method:"POST",body:{recipients:[d.value.to],subject:d.value.subject,content:d.value.content,isHtml:d.value.isHtml,sender:"info@be-mindpower.net"}});o.success&&o.sent>0?c.value={success:!0,messageId:o.results[0]?.messageId}:c.value={success:!1,error:o.errors?.[0]?.error||"Error desconocido"}}catch(o){c.value={success:!1,error:o.data?.message||o.message||"Error desconocido"}}finally{v.value=!1}},_=async()=>{y.value=!0,m.value=null;try{const o=await $fetch("/api/smtp/test-with-email",{method:"POST",body:{email:g.value}});m.value=o}catch(o){m.value={success:!1,error:o.data?.message||o.message||"Error desconocido"}}finally{y.value=!1}},T=async()=>{h.value=!0,n.value=null;try{const o=await $fetch("/api/smtp/check-ses-status",{method:"POST"});n.value=o}catch(o){n.value={success:!1,error:o.data?.message||o.message||"Error desconocido",recommendations:["Error al verificar estado de AWS SES"]}}finally{h.value=!1}};return(o,t)=>(l(),a("div",H,[s("div",j,[t[17]||(t[17]=s("h1",{class:"text-3xl font-bold mb-8"},"Test SMTP Configuration",-1)),s("div",q,[t[5]||(t[5]=s("h2",{class:"text-xl font-semibold mb-4"},"üîå Verificar Conexi√≥n SMTP",-1)),s("button",{onClick:w,disabled:e(x),class:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 disabled:opacity-50"},r(e(x)?"Verificando...":"Verificar Conexi√≥n"),9,B),e(b)?(l(),a("div",{key:0,class:E(["mt-4 p-4 rounded",e(b).success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[s("p",D,r(e(b).success?"‚úÖ Conexi√≥n exitosa":"‚ùå Error de conexi√≥n"),1),e(b).error?(l(),a("p",U,r(e(b).error),1)):i("",!0)],2)):i("",!0)]),s("div",N,[t[7]||(t[7]=s("h2",{class:"text-xl font-semibold mb-4"},"üß™ Prueba Alternativa - Env√≠o Real",-1)),t[8]||(t[8]=s("p",{class:"text-sm text-gray-600 mb-4"}," Si la verificaci√≥n de conexi√≥n falla, prueba enviando un email real para verificar que las credenciales funcionen. ",-1)),s("div",O,[s("div",W,[t[6]||(t[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Tu Email para Prueba ",-1)),f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>V(g)?g.value=u:null),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tu-email@example.com"},null,512),[[S,e(g)]])]),s("button",{onClick:_,disabled:e(y)||!e(g),class:"bg-purple-500 text-white px-6 py-2 rounded hover:bg-purple-600 disabled:opacity-50"},r(e(y)?"Enviando...":"Probar con Email Real"),9,L)]),e(m)?(l(),a("div",{key:0,class:E(["mt-4 p-4 rounded",e(m).success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[s("p",$,r(e(m).success?"‚úÖ Email enviado exitosamente":"‚ùå Error enviando email"),1),e(m).messageId?(l(),a("p",F,"Message ID: "+r(e(m).messageId),1)):i("",!0),e(m).error?(l(),a("p",z,r(e(m).error),1)):i("",!0),e(m).success?(l(),a("p",J,"Revisa tu bandeja de entrada (y spam) para confirmar que lleg√≥.")):i("",!0)],2)):i("",!0)]),s("div",K,[t[13]||(t[13]=s("h2",{class:"text-xl font-semibold mb-4"},"üìß Enviar Email de Prueba",-1)),s("form",{onSubmit:R(k,["prevent"]),class:"space-y-4"},[s("div",null,[t[9]||(t[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email Destinatario ",-1)),f(s("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>e(d).to=u),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"test@example.com"},null,512),[[S,e(d).to]])]),s("div",null,[t[10]||(t[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Asunto ",-1)),f(s("input",{"onUpdate:modelValue":t[2]||(t[2]=u=>e(d).subject=u),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email de prueba SMTP"},null,512),[[S,e(d).subject]])]),s("div",null,[t[11]||(t[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Mensaje ",-1)),f(s("textarea",{"onUpdate:modelValue":t[3]||(t[3]=u=>e(d).content=u),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Este es un email de prueba enviado desde el sistema SMTP..."},null,512),[[S,e(d).content]])]),s("div",X,[f(s("input",{"onUpdate:modelValue":t[4]||(t[4]=u=>e(d).isHtml=u),type:"checkbox",id:"isHtml",class:"mr-2"},null,512),[[C,e(d).isHtml]]),t[12]||(t[12]=s("label",{for:"isHtml",class:"text-sm text-gray-700"}," Enviar como HTML ",-1))]),s("button",{type:"submit",disabled:e(v),class:"bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 disabled:opacity-50"},r(e(v)?"Enviando...":"Enviar Email"),9,Z)],32),e(c)?(l(),a("div",{key:0,class:E(["mt-4 p-4 rounded",e(c).success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[s("p",G,r(e(c).success?"‚úÖ Email enviado exitosamente":"‚ùå Error enviando email"),1),e(c).messageId?(l(),a("p",Q,"Message ID: "+r(e(c).messageId),1)):i("",!0),e(c).error?(l(),a("p",Y,r(e(c).error),1)):i("",!0)],2)):i("",!0)]),s("div",ee,[t[15]||(t[15]=s("h2",{class:"text-xl font-semibold mb-4"},"üîç Estado de AWS SES",-1)),t[16]||(t[16]=s("p",{class:"text-sm text-gray-600 mb-4"}," Verifica el estado de tu cuenta AWS SES y las configuraciones de dominio/email. ",-1)),s("button",{onClick:T,disabled:e(h),class:"bg-indigo-500 text-white px-6 py-2 rounded hover:bg-indigo-600 disabled:opacity-50"},r(e(h)?"Verificando...":"Verificar Estado AWS SES"),9,se),e(n)?(l(),a("div",{key:0,class:E(["mt-4 p-4 rounded",e(n).success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[s("p",te,r(e(n).success?"‚úÖ Verificaci√≥n completada":"‚ùå Error en verificaci√≥n"),1),e(n).recommendations?(l(),a("div",oe,[t[14]||(t[14]=s("p",{class:"font-medium"},"Recomendaciones:",-1)),s("ul",ae,[(l(!0),a(I,null,A(e(n).recommendations,u=>(l(),a("li",{key:u},r(u),1))),128))])])):i("",!0),e(n).testMessageId?(l(),a("p",le,"Message ID: "+r(e(n).testMessageId),1)):i("",!0),e(n).error?(l(),a("p",re,"Error: "+r(e(n).error),1)):i("",!0)],2)):i("",!0)]),t[18]||(t[18]=P('<div class="bg-white p-6 rounded-lg shadow"><h2 class="text-xl font-semibold mb-4">‚öôÔ∏è Configuraci√≥n SMTP</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div><p class="font-medium text-gray-700">Host:</p><p class="text-gray-600">email-smtp.us-east-1.amazonaws.com</p></div><div><p class="font-medium text-gray-700">Puerto:</p><p class="text-gray-600">587</p></div><div><p class="font-medium text-gray-700">Usuario:</p><p class="text-gray-600">AKIAXTORPJBRNRZLIA5D</p></div><div><p class="font-medium text-gray-700">Seguridad:</p><p class="text-gray-600">STARTTLS</p></div><div><p class="font-medium text-gray-700">From Name:</p><p class="text-gray-600">BMP Support</p></div><div><p class="font-medium text-gray-700">Reply To:</p><p class="text-gray-600">info@be-mindpower.net</p></div></div></div>',1))])]))}});export{de as default};
