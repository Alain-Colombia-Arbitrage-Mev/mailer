import{q as b,r as c,c as d,a as t,k as u,d as p,J as i,s as a,t as n,o as l}from"#entry";const x={style:{"min-height":"100vh",display:"flex","align-items":"center","justify-content":"center",background:"#f3f4f6",padding:"20px"}},h={style:{background:"white",padding:"40px","border-radius":"12px","box-shadow":"0 4px 6px rgba(0,0,0,0.1)","max-width":"500px",width:"100%"}},y=["disabled"],v=["disabled"],_=["disabled"],w={style:{margin:"0 0 8px 0"}},k={style:{margin:"0"}},E={key:0,style:{"margin-top":"12px","font-size":"12px",overflow:"auto"}},S=b({__name:"register-admin",setup(C){const o=c(!1),s=c(null),m=async()=>{o.value=!0,s.value=null;try{const e=await $fetch("/api/auth/register-admin-manual",{method:"POST"});s.value={success:e.success,message:e.message,details:e}}catch(e){console.error("Error:",e),s.value={success:!1,message:e.data?.message||e.message||"Error desconocido",details:e}}finally{o.value=!1}},g=async()=>{o.value=!0,s.value=null;try{const e=await $fetch("/api/auth/confirm-admin-email",{method:"POST"});s.value={success:e.success,message:e.message,details:e}}catch(e){console.error("Error:",e),s.value={success:!1,message:e.data?.message||e.message||"Error desconocido",details:e}}finally{o.value=!1}},f=async()=>{o.value=!0,s.value=null;try{const e=await $fetch("/api/auth/update-admin-password",{method:"POST"});s.value={success:e.success,message:e.message,details:e}}catch(e){console.error("Error:",e),s.value={success:!1,message:e.data?.message||e.message||"Error desconocido",details:e}}finally{o.value=!1}};return(e,r)=>(l(),d("div",x,[t("div",h,[r[0]||(r[0]=t("h1",{style:{"text-align":"center","margin-bottom":"30px",color:"#111827"}},"Registrar Usuario Admin",-1)),r[1]||(r[1]=t("div",{style:{"margin-bottom":"20px"}},[t("p",null,[t("strong",null,"Email:"),p(" info@be-mindpower.net")]),t("p",null,[t("strong",null,"Contraseña:"),p(" Be-mind.2025+++")])],-1)),t("button",{onClick:m,disabled:a(o),style:i([{width:"100%",padding:"12px",background:"#3b82f6",color:"white",border:"none","border-radius":"8px",cursor:"pointer","font-size":"16px","margin-bottom":"10px"},{opacity:a(o)?.5:1}])},n(a(o)?"Registrando...":"Registrar Usuario Admin"),13,y),t("button",{onClick:g,disabled:a(o),style:i([{width:"100%",padding:"12px",background:"#10b981",color:"white",border:"none","border-radius":"8px",cursor:"pointer","font-size":"16px","margin-bottom":"10px"},{opacity:a(o)?.5:1}])},n(a(o)?"Confirmando...":"Confirmar Email Admin"),13,v),t("button",{onClick:f,disabled:a(o),style:i([{width:"100%",padding:"12px",background:"#f59e0b",color:"white",border:"none","border-radius":"8px",cursor:"pointer","font-size":"16px"},{opacity:a(o)?.5:1}])},n(a(o)?"Actualizando...":"Actualizar Contraseña en Supabase"),13,_),a(s)?(l(),d("div",{key:0,style:i([{"margin-top":"20px",padding:"16px","border-radius":"8px"},{background:a(s).success?"#f0fdf4":"#fef2f2",border:a(s).success?"1px solid #bbf7d0":"1px solid #fecaca",color:a(s).success?"#166534":"#dc2626"}])},[t("h3",w,n(a(s).success?"Éxito":"Error"),1),t("p",k,n(a(s).message),1),a(s).details?(l(),d("pre",E,n(JSON.stringify(a(s).details,null,2)),1)):u("",!0)],4)):u("",!0),r[2]||(r[2]=t("div",{style:{"margin-top":"30px","text-align":"center"}},[t("a",{href:"/auth/admin-login",style:{color:"#3b82f6","text-decoration":"none"}}," ← Ir al Login ")],-1))])]))}});export{S as default};
