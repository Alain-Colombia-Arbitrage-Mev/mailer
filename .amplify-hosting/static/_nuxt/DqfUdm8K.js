import{_ as C}from"./B8aq_QmG.js";import{q as j,h as k,r as f,E as x,e as B,A as N,c as u,a as e,b as T,w as D,l as n,v as i,s,G as V,F as P,g as S,t as d,k as y,H as c,d as b,j as R,n as q,o as m}from"#entry";const G={class:"space-y-6"},A={class:"sm:flex sm:items-center sm:justify-between"},F={class:"mt-4 sm:mt-0"},H={class:"card"},L={class:"card-body space-y-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["value"],z={class:"card"},K={class:"card-body space-y-4"},X={class:"form-help"},Y={class:"card"},J={class:"card-body space-y-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"card"},Z={class:"card-body space-y-4"},$={class:"space-y-3"},h={class:"flex items-center"},ee={class:"flex items-center"},te={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"bg-blue-50 p-4 rounded-lg"},ne={class:"text-sm text-blue-800"},oe={class:"card"},ie={class:"card-body space-y-4"},de={class:"space-y-3"},re={class:"flex items-center"},ue={class:"flex items-center"},me={class:"flex items-center"},pe={key:0},ce=["min"],fe={class:"flex justify-end space-x-3"},ye=["disabled"],be=["disabled"],ve={key:0,class:"spinner mr-2"},Ve=j({__name:"new",setup(_e){const l=k({name:"",template_id:"",subject:"",html_content:"",text_content:"",from_name:"Mailer Be-Mindpower",from_email:"noreply@tudominio.com",reply_to:"",recipient_type:"all",balance_min_filter:null,balance_max_filter:null,kyc_status_filter:"",country_filter:"",send_type:"draft",scheduled_at:""}),r=f(!1),v=f([]),p=f(0),w=x(()=>{const o=new Date;return o.setMinutes(o.getMinutes()+30),o.toISOString().slice(0,16)}),_=x(()=>l.name&&l.subject&&l.html_content&&l.from_name&&l.from_email&&(l.send_type!=="scheduled"||l.scheduled_at)),E=async()=>{l.send_type="draft",await g()},g=async()=>{if(_.value){r.value=!0;try{const o={name:l.name,template_id:l.template_id||null,subject:l.subject,html_content:l.html_content,text_content:l.text_content,from_name:l.from_name,from_email:l.from_email,reply_to:l.reply_to||null,status:l.send_type==="now"?"sending":l.send_type==="scheduled"?"scheduled":"draft",scheduled_at:l.send_type==="scheduled"?l.scheduled_at:null,balance_min_filter:l.balance_min_filter,balance_max_filter:l.balance_max_filter,kyc_status_filter:l.kyc_status_filter||null,country_filter:l.country_filter||null,total_contacts:p.value};console.log("Saving campaign:",o),await new Promise(t=>setTimeout(t,1e3)),await q("/campaigns")}catch(o){console.error("Error saving campaign:",o)}finally{r.value=!1}}},M=()=>{if(r.value)return"Guardando...";switch(l.send_type){case"now":return"Crear y Enviar";case"scheduled":return"Programar Campaña";default:return"Guardar Borrador"}};return B(async()=>{v.value=[{id:"1",name:"Newsletter Básico"},{id:"2",name:"Promoción Especial"},{id:"3",name:"Bienvenida"}],p.value=1234}),N([()=>l.recipient_type,()=>l.balance_min_filter,()=>l.balance_max_filter,()=>l.kyc_status_filter,()=>l.country_filter],async()=>{l.recipient_type==="all"?p.value=1234:p.value=Math.floor(Math.random()*500)+100}),(o,t)=>{const U=C;return m(),u("div",G,[e("div",A,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Nueva Campaña"),e("p",{class:"mt-1 text-sm text-gray-500"}," Crea y configura una nueva campaña de email marketing ")],-1)),e("div",F,[T(U,{to:"/campaigns",class:"btn btn-outline"},{default:D(()=>[...t[18]||(t[18]=[b(" ← Volver a Campañas ",-1)])]),_:1})])]),e("form",{onSubmit:R(g,["prevent"]),class:"space-y-6"},[e("div",H,[t[24]||(t[24]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Información Básica")],-1)),e("div",L,[e("div",I,[e("div",null,[t[20]||(t[20]=e("label",{class:"form-label"},"Nombre de la Campaña *",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(l).name=a),type:"text",required:"",class:"input",placeholder:"Ej: Newsletter Marzo 2024"},null,512),[[i,s(l).name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"form-label"},"Plantilla",-1)),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(l).template_id=a),class:"input"},[t[21]||(t[21]=e("option",{value:""},"Crear desde cero",-1)),(m(!0),u(P,null,S(s(v),a=>(m(),u("option",{key:a.id,value:a.id},d(a.name),9,O))),128))],512),[[V,s(l).template_id]])])]),e("div",null,[t[23]||(t[23]=e("label",{class:"form-label"},"Asunto del Email *",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(l).subject=a),type:"text",required:"",class:"input",placeholder:"Ej: ¡Ofertas especiales solo para ti!"},null,512),[[i,s(l).subject]])])])]),e("div",z,[t[27]||(t[27]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Contenido del Email")],-1)),e("div",K,[e("div",null,[t[25]||(t[25]=e("label",{class:"form-label"},"Contenido HTML *",-1)),n(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(l).html_content=a),rows:"10",required:"",class:"input",placeholder:"Escribe el contenido HTML de tu email aquí..."},null,512),[[i,s(l).html_content]]),e("p",X," Puedes usar variables como "+d(o.firstName)+", "+d(o.lastName)+", "+d(o.email)+", "+d(o.Balance),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"form-label"},"Contenido de Texto (Opcional)",-1)),n(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(l).text_content=a),rows:"6",class:"input",placeholder:"Versión en texto plano del email..."},null,512),[[i,s(l).text_content]])])])]),e("div",Y,[t[31]||(t[31]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Información del Remitente")],-1)),e("div",J,[e("div",Q,[e("div",null,[t[28]||(t[28]=e("label",{class:"form-label"},"Nombre del Remitente *",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s(l).from_name=a),type:"text",required:"",class:"input",placeholder:"Ej: Mailer Be-Mindpower"},null,512),[[i,s(l).from_name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"form-label"},"Email del Remitente *",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s(l).from_email=a),type:"email",required:"",class:"input",placeholder:"Ej: noreply@tudominio.com"},null,512),[[i,s(l).from_email]])])]),e("div",null,[t[30]||(t[30]=e("label",{class:"form-label"},"Email de Respuesta",-1)),n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s(l).reply_to=a),type:"email",class:"input",placeholder:"Ej: soporte@tudominio.com"},null,512),[[i,s(l).reply_to]])])])]),e("div",W,[t[41]||(t[41]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Destinatarios")],-1)),e("div",Z,[e("div",null,[t[34]||(t[34]=e("label",{class:"form-label"},"Seleccionar Destinatarios",-1)),e("div",$,[e("label",h,[n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s(l).recipient_type=a),type:"radio",value:"all",class:"text-blue-600 focus:ring-blue-500"},null,512),[[c,s(l).recipient_type]]),t[32]||(t[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Todos los usuarios activos",-1))]),e("label",ee,[n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>s(l).recipient_type=a),type:"radio",value:"filtered",class:"text-blue-600 focus:ring-blue-500"},null,512),[[c,s(l).recipient_type]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Usuarios con filtros específicos",-1))])])]),s(l).recipient_type==="filtered"?(m(),u("div",te,[e("div",le,[e("div",null,[t[35]||(t[35]=e("label",{class:"form-label"},"Balance Mínimo",-1)),n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>s(l).balance_min_filter=a),type:"number",min:"0",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[i,s(l).balance_min_filter,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"form-label"},"Balance Máximo",-1)),n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>s(l).balance_max_filter=a),type:"number",min:"0",step:"0.01",class:"input",placeholder:"1000.00"},null,512),[[i,s(l).balance_max_filter,void 0,{number:!0}]])])]),e("div",se,[e("div",null,[t[38]||(t[38]=e("label",{class:"form-label"},"Estado KYC",-1)),n(e("select",{"onUpdate:modelValue":t[12]||(t[12]=a=>s(l).kyc_status_filter=a),class:"input"},[...t[37]||(t[37]=[e("option",{value:""},"Todos",-1),e("option",{value:"pending"},"Pendiente",-1),e("option",{value:"approved"},"Aprobado",-1),e("option",{value:"rejected"},"Rechazado",-1)])],512),[[V,s(l).kyc_status_filter]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"form-label"},"País",-1)),n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>s(l).country_filter=a),type:"text",class:"input",placeholder:"Ej: ES, MX, AR"},null,512),[[i,s(l).country_filter]])])])])):y("",!0),e("div",ae,[e("p",ne,[t[40]||(t[40]=e("strong",null,"Destinatarios estimados:",-1)),b(" "+d(s(p))+" usuarios ",1)])])])]),e("div",oe,[t[47]||(t[47]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Programación")],-1)),e("div",ie,[e("div",null,[t[45]||(t[45]=e("label",{class:"form-label"},"¿Cuándo enviar?",-1)),e("div",de,[e("label",re,[n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>s(l).send_type=a),type:"radio",value:"now",class:"text-blue-600 focus:ring-blue-500"},null,512),[[c,s(l).send_type]]),t[42]||(t[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Enviar ahora",-1))]),e("label",ue,[n(e("input",{"onUpdate:modelValue":t[15]||(t[15]=a=>s(l).send_type=a),type:"radio",value:"scheduled",class:"text-blue-600 focus:ring-blue-500"},null,512),[[c,s(l).send_type]]),t[43]||(t[43]=e("span",{class:"ml-2 text-sm text-gray-700"},"Programar envío",-1))]),e("label",me,[n(e("input",{"onUpdate:modelValue":t[16]||(t[16]=a=>s(l).send_type=a),type:"radio",value:"draft",class:"text-blue-600 focus:ring-blue-500"},null,512),[[c,s(l).send_type]]),t[44]||(t[44]=e("span",{class:"ml-2 text-sm text-gray-700"},"Guardar como borrador",-1))])])]),s(l).send_type==="scheduled"?(m(),u("div",pe,[t[46]||(t[46]=e("label",{class:"form-label"},"Fecha y Hora de Envío",-1)),n(e("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>s(l).scheduled_at=a),type:"datetime-local",class:"input",min:s(w)},null,8,ce),[[i,s(l).scheduled_at]])])):y("",!0)])]),e("div",fe,[e("button",{type:"button",onClick:E,class:"btn btn-outline",disabled:s(r)}," Guardar Borrador ",8,ye),e("button",{type:"submit",class:"btn btn-primary",disabled:s(r)||!s(_)},[s(r)?(m(),u("span",ve)):y("",!0),b(" "+d(M()),1)],8,be)])],32)])}}});export{Ve as default};
