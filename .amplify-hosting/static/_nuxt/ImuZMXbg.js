import{_ as E}from"./B8aq_QmG.js";import{c as n,o as a,a as e,q as B,r as u,B as j,k as m,b as o,s as t,t as p,w as y,j as R,d as i,i as V,m as $}from"#entry";import{u as U}from"./C4JpkZNp.js";import{r as L}from"./Bi0YyG7H.js";import{r as N}from"./B2LZCxKM.js";import{r as I}from"./CKFK7sG5.js";import{r as P}from"./BreoAuwB.js";import{r as q}from"./D3n69WmM.js";import"./DMoW-9xf.js";function w(_,f){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function Z(_,f){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})])}const A={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},T={class:"max-w-md w-full space-y-8"},z={class:"text-center"},D={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-purple-100"},F={key:0,class:"rounded-md bg-green-50 p-4"},O={class:"flex"},G={class:"ml-3"},H={class:"mt-2 text-sm text-green-700"},J={class:"mt-4"},K={key:1,class:"rounded-md bg-red-50 p-4"},Q={class:"flex"},W={class:"ml-3"},X={class:"mt-2 text-sm text-red-700"},Y={class:"rounded-md bg-blue-50 p-4"},ee={class:"flex"},se={class:"rounded-md bg-yellow-50 p-4"},te={class:"flex"},re={class:"space-y-4"},oe=["disabled"],ne={key:0,class:"flex items-center"},ae={key:1,class:"flex items-center"},ie={key:0,class:"text-sm text-center"},le=["disabled"],de={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},ue={class:"text-center"},ce={class:"flex items-center justify-center space-x-2 text-sm text-gray-500"},me={class:"text-center space-y-2"},pe={class:"flex justify-center space-x-4"},ke=B({__name:"register-admin",setup(_){const{testConnection:f,sendMagicLink:k,verifyConfig:S}=U(),c=u(!1),x=u(!1),l=u(""),g=u(!1),h=u(""),d=u(null),v=u(!1),M=async()=>{x.value=!0,d.value=null;try{const r=S();console.log("üîç Verificaci√≥n de URL:",r);const s=await f();s.success?(d.value={success:!0,message:"‚úÖ Conexi√≥n exitosa a Supabase"},v.value=!0):d.value={success:!1,message:`‚ùå Error de conexi√≥n: ${s.error}`}}catch(r){d.value={success:!1,message:`üí• Error: ${r.message}`}}finally{x.value=!1}},C=async()=>{if(!v.value){l.value="Por favor, prueba la conexi√≥n primero";return}c.value=!0,l.value="";try{console.log("üöÄ Iniciando registro de super usuario...");const r=await k("info@be-mindpower.net");if(!r.success){console.error("‚ùå Error en registro:",r.error),r.error?.includes("rate limit")?l.value=`${r.error}

üí° Soluciones:
1. Espera 5-10 minutos e intenta de nuevo
2. Ve al panel de Supabase y confirma el usuario manualmente
3. El usuario puede ya existir pero necesita confirmaci√≥n`:l.value=r.error||"Error desconocido";return}console.log("‚úÖ Magic Link enviado exitosamente"),g.value=!0,h.value="Magic Link enviado a info@be-mindpower.net. Revisa tu email para acceder o confirma manualmente en el panel de Supabase."}catch(r){console.error("üí• Error capturado:",r),l.value=r.message||"Error al crear el super usuario"}finally{c.value=!1}};return j({title:"Registro Super Usuario - Mailer Be-Mindpower",description:"Crear cuenta de super usuario para administrar Mailer Be-Mindpower"}),(r,s)=>{const b=E;return a(),n("div",A,[e("div",T,[e("div",z,[e("div",D,[o(t(w),{class:"h-6 w-6 text-purple-600"})]),s[0]||(s[0]=e("h2",{class:"mt-6 text-3xl font-extrabold text-gray-900"}," Registro de Super Usuario ",-1)),s[1]||(s[1]=e("p",{class:"mt-2 text-sm text-gray-600"}," Crear cuenta de administrador para Mailer Be-Mindpower ",-1))]),t(g)?(a(),n("div",F,[e("div",O,[o(t(L),{class:"h-5 w-5 text-green-400"}),e("div",G,[s[3]||(s[3]=e("h3",{class:"text-sm font-medium text-green-800"}," ¬°Super Usuario Creado! ",-1)),e("div",H,[e("p",null,p(t(h)),1)]),e("div",J,[o(b,{to:"/auth/login",class:"text-sm font-medium text-green-600 hover:text-green-500"},{default:y(()=>[...s[2]||(s[2]=[i(" Ir al login ‚Üí ",-1)])]),_:1})])])])])):m("",!0),t(l)?(a(),n("div",K,[e("div",Q,[o(t(N),{class:"h-5 w-5 text-red-400"}),e("div",W,[s[4]||(s[4]=e("h3",{class:"text-sm font-medium text-red-800"}," Error en el registro ",-1)),e("div",X,[e("p",null,p(t(l)),1)])])])])):m("",!0),t(g)?m("",!0):(a(),n("form",{key:2,class:"mt-8 space-y-6",onSubmit:R(C,["prevent"])},[e("div",Y,[e("div",ee,[o(t(I),{class:"h-5 w-5 text-blue-400"}),s[5]||(s[5]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Informaci√≥n del Super Usuario "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,[e("strong",null,"Email:"),i(" info@be-mindpower.net")]),e("li",null,[e("strong",null,"Contrase√±a:"),i(" Bemind.2025+++")]),e("li",null,[e("strong",null,"Rol:"),i(" Administrador del sistema")])])])],-1))])]),e("div",se,[e("div",te,[o(t(P),{class:"h-5 w-5 text-yellow-400"}),s[6]||(s[6]=V('<div class="ml-3"><h3 class="text-sm font-medium text-yellow-800"> ‚ö†Ô∏è Sobre el Rate Limit de Emails </h3><div class="mt-2 text-sm text-yellow-700"><p class="mb-2">Supabase gratuito limita el env√≠o de emails de confirmaci√≥n:</p><ul class="list-disc list-inside space-y-1"><li>Si aparece &quot;email rate limit exceeded&quot;, es normal</li><li>El usuario puede crearse pero necesitar confirmaci√≥n manual</li><li>Puedes confirmar usuarios en el panel de Supabase</li><li>O esperar 5-10 minutos e intentar de nuevo</li></ul></div></div>',1))])]),e("div",re,[e("button",{onClick:M,type:"button",disabled:t(c),class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[t(x)?(a(),n("span",ne,[...s[7]||(s[7]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"},null,-1),i(" Probando conexi√≥n... ",-1)])])):(a(),n("span",ae,[o(t(Z),{class:"h-4 w-4 mr-2"}),s[8]||(s[8]=i(" Probar Conexi√≥n a Supabase ",-1))]))],8,oe),t(d)?(a(),n("div",ie,[e("span",{class:$(t(d).success?"text-green-600":"text-red-600")},p(t(d).message),3)])):m("",!0)]),e("div",null,[e("button",{type:"submit",disabled:t(c)||!t(v),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed"},[t(c)?(a(),n("span",de,[...s[9]||(s[9]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1)])])):m("",!0),o(t(w),{class:"h-4 w-4 mr-2"}),i(" "+p(t(c)?"Creando Super Usuario...":"Crear Super Usuario"),1)],8,le)]),e("div",ue,[e("div",ce,[o(t(q),{class:"h-4 w-4"}),s[10]||(s[10]=e("span",null,"Registro seguro de administrador",-1))])])],32)),e("div",me,[e("div",pe,[o(b,{to:"/auth/login",class:"font-medium text-blue-600 hover:text-blue-500"},{default:y(()=>[...s[11]||(s[11]=[i(" ‚Üê Volver al login ",-1)])]),_:1}),o(b,{to:"/auth/manual-confirmation",class:"font-medium text-orange-600 hover:text-orange-500"},{default:y(()=>[...s[12]||(s[12]=[i(" üìã Instrucciones Manuales ",-1)])]),_:1})]),s[13]||(s[13]=e("p",{class:"text-xs text-gray-500"}," ¬øRate limit? Usa las instrucciones manuales para confirmar el usuario ",-1))])])])}}});export{ke as default};
