const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CL2yjAnz.js","./D59wPe2Q.js"])))=>i.map(i=>d[i]);
import{c as i,o as a,a as e,r as m,E as J,e as W,u as X,f as D,w as E,_ as b,b as l,s as d,t as c,d as g,l as w,v as Y,G as $,F as j,g as P,m as S,K as ee,k as L,n as A}from"#entry";import{_ as te}from"./B8aq_QmG.js";import{_ as se}from"./Dyv7dZ9s.js";import{r as V}from"./CVHiCNXI.js";import{r as T,a as oe}from"./B_OYc0Sc.js";import{r as N}from"./DBrhDGOf.js";import{r as re}from"./BKE9UY2T.js";import{r as ae}from"./QJyqa3i7.js";import{r as ne}from"./B2LZCxKM.js";import{r as le}from"./Bi0YyG7H.js";import{r as I}from"./Dp_75vtG.js";function ie(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})])}function de(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function ue(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ce(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function me(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function q(p,u){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const pe={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100"},ge={class:"bg-white/80 backdrop-blur-sm shadow-lg border-b border-purple-200 mb-8"},xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ve={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center py-6 lg:py-8 space-y-4 lg:space-y-0"},fe={class:"flex items-center space-x-3"},be={class:"bg-gradient-to-r from-purple-600 to-indigo-600 p-2 rounded-xl shadow-md"},we={class:"flex items-center space-x-2 mt-1"},he={class:"text-sm font-medium text-purple-600 bg-purple-100 px-3 py-1 rounded-full shadow-sm"},_e={class:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4"},ye={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ke={class:"bg-white/90 backdrop-blur-sm shadow-lg rounded-2xl border border-purple-200 p-6 mb-8"},Ce={class:"flex items-center mb-4"},Ee={class:"bg-gradient-to-r from-blue-500 to-purple-500 p-2 rounded-lg shadow-md mr-3"},$e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Se={class:"relative"},Le=["value"],Ve={class:"bg-white/90 backdrop-blur-sm shadow-lg rounded-2xl border border-purple-200 overflow-hidden"},Be={key:0,class:"flex flex-col items-center justify-center py-16"},Me={class:"relative"},De={class:"absolute inset-0 flex items-center justify-center"},je={key:1,class:"text-center py-16"},Pe={class:"bg-gradient-to-br from-purple-100 to-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6"},Ae={key:2},Te={class:"p-6 hover:bg-gradient-to-r hover:from-purple-50/50 hover:to-blue-50/50 transition-all duration-200"},Ne={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0"},Ie={class:"flex-1"},qe={class:"flex items-start space-x-4"},Fe={class:"flex-1"},Oe={class:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-1 sm:space-y-0"},ze={class:"text-lg font-semibold text-gray-800"},Re={class:"mt-3 grid grid-cols-2 lg:grid-cols-4 gap-4"},Ue={class:"bg-white/60 rounded-lg p-3 border border-gray-200"},He={class:"text-sm font-semibold text-gray-800"},Ze={class:"bg-white/60 rounded-lg p-3 border border-gray-200"},Ge={class:"text-sm font-semibold text-blue-600"},Ke={class:"bg-white/60 rounded-lg p-3 border border-gray-200"},Qe={class:"text-sm font-semibold text-green-600"},Je={class:"bg-white/60 rounded-lg p-3 border border-gray-200"},We={class:"text-sm font-semibold text-purple-600"},Xe={class:"mt-3 flex flex-wrap gap-4 text-sm text-gray-600"},Ye={key:0,class:"flex items-center"},et={key:1,class:"flex items-center"},tt={class:"flex items-center space-x-3"},st={class:"bg-white rounded-xl p-2 shadow-md border border-gray-200 flex space-x-2"},ot=["onClick"],rt=["onClick"],at=["onClick"],nt=["onClick"],bt={__name:"index",setup(p){const u=m([]),B=m([]),h=m(!1),x=m(""),v=m("all"),f=m("all"),_=m("created_at"),y=J(()=>{let o=[...u.value];if(x.value.trim()){const t=x.value.toLowerCase();o=o.filter(n=>n.name.toLowerCase().includes(t))}return v.value!=="all"&&(o=o.filter(t=>t.status===v.value)),f.value!=="all"&&(o=o.filter(t=>t.template_id===f.value)),o.sort((t,n)=>{let r,s;switch(_.value){case"name":r=t.name.toLowerCase(),s=n.name.toLowerCase();break;case"status":r=t.status,s=n.status;break;case"sent_at":r=new Date(t.sent_at||"1970-01-01"),s=new Date(n.sent_at||"1970-01-01");break;default:r=new Date(t.created_at||"1970-01-01"),s=new Date(n.created_at||"1970-01-01")}return s>r?1:-1}),o}),k=async()=>{h.value=!0;try{const{useSupabase:o}=await b(async()=>{const{useSupabase:s}=await import("./CL2yjAnz.js");return{useSupabase:s}},__vite__mapDeps([0,1]),import.meta.url),t=o(),{data:n,error:r}=await t.from("campaigns").select("*").order("created_at",{ascending:!1});if(r)throw r;u.value=n||[]}catch(o){console.error("Error loading campaigns:",o)}finally{h.value=!1}},F=async()=>{try{const{useSupabase:o}=await b(async()=>{const{useSupabase:s}=await import("./CL2yjAnz.js");return{useSupabase:s}},__vite__mapDeps([0,1]),import.meta.url),t=o(),{data:n,error:r}=await t.from("email_templates").select("id, name").eq("is_active",!0).order("name");if(r)throw r;B.value=n||[]}catch(o){console.error("Error loading templates:",o)}},O=o=>({draft:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",sending:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",paused:"bg-orange-100 text-orange-800",cancelled:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",z=o=>({draft:"Borrador",scheduled:"Programada",sending:"Enviando",sent:"Enviada",paused:"Pausada",cancelled:"Cancelada"})[o]||o,R=o=>({draft:I,scheduled:ue,sending:T,sent:le,paused:me,cancelled:ne})[o]||I,U=o=>({draft:"bg-gradient-to-r from-gray-500 to-gray-600",scheduled:"bg-gradient-to-r from-blue-500 to-blue-600",sending:"bg-gradient-to-r from-yellow-500 to-orange-500",sent:"bg-gradient-to-r from-green-500 to-green-600",paused:"bg-gradient-to-r from-orange-500 to-red-500",cancelled:"bg-gradient-to-r from-red-500 to-red-600"})[o]||"bg-gradient-to-r from-gray-500 to-gray-600",M=o=>new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=o=>A(`/campaigns/${o.id}`),Z=o=>A(`/campaigns/new?id=${o.id}`),G=async o=>{if(confirm(`¿Enviar la campaña "${o.name}" a ${o.total_contacts} contactos?`))try{const{useSupabase:t}=await b(async()=>{const{useSupabase:s}=await import("./CL2yjAnz.js");return{useSupabase:s}},__vite__mapDeps([0,1]),import.meta.url),n=t(),{error:r}=await n.from("campaigns").update({status:"sending"}).eq("id",o.id);if(r)throw r;alert("Campaña enviada exitosamente"),await k()}catch(t){console.error("Error sending campaign:",t),alert("Error al enviar la campaña")}},K=async o=>{if(confirm(`¿Eliminar la campaña "${o.name}"?`))try{const{useSupabase:t}=await b(async()=>{const{useSupabase:s}=await import("./CL2yjAnz.js");return{useSupabase:s}},__vite__mapDeps([0,1]),import.meta.url),n=t(),{error:r}=await n.from("campaigns").delete().eq("id",o.id);if(r)throw r;u.value=u.value.filter(s=>s.id!==o.id)}catch(t){console.error("Error deleting campaign:",t),alert("Error al eliminar la campaña")}};return W(async()=>{await Promise.all([k(),F()])}),X({title:"Campañas - MailPower"}),(o,t)=>{const n=te,r=se;return a(),D(r,{name:"default"},{default:E(()=>[e("div",pe,[e("div",ge,[e("div",xe,[e("div",ve,[e("div",null,[e("div",fe,[e("div",be,[l(d(V),{class:"h-6 w-6 text-white"})]),e("div",null,[t[6]||(t[6]=e("h1",{class:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 bg-clip-text text-transparent"}," Campañas de Email ",-1)),e("div",we,[e("span",he,c(u.value.length)+" campañas activas ",1),t[4]||(t[4]=e("span",{class:"text-sm text-gray-500"},"•",-1)),t[5]||(t[5]=e("span",{class:"text-sm text-gray-600"},"Marketing profesional",-1))])])]),t[7]||(t[7]=e("p",{class:"mt-2 text-gray-600 max-w-2xl"}," Gestiona y envía campañas masivas de email marketing con análisis detallados y segmentación avanzada ",-1))]),e("div",_e,[l(n,{to:"/campaigns/new",class:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"},{default:E(()=>[l(d(q),{class:"h-5 w-5 mr-2"}),t[8]||(t[8]=g(" Nueva Campaña ",-1))]),_:1}),e("button",{onClick:k,class:"inline-flex items-center justify-center px-6 py-3 bg-white text-purple-600 font-semibold rounded-xl border-2 border-purple-200 shadow-md hover:shadow-lg hover:border-purple-300 transition-all duration-200"},[l(d(T),{class:"h-5 w-5 mr-2"}),t[9]||(t[9]=g(" Actualizar ",-1))])])])])]),e("div",ye,[e("div",ke,[e("div",Ce,[e("div",Ee,[l(d(ie),{class:"h-5 w-5 text-white"})]),t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Filtros y Búsqueda",-1))]),e("div",$e,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar Campaña",-1)),e("div",Se,[l(d(ce),{class:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"text",placeholder:"Nombre de campaña...",class:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200"},null,512),[[Y,x.value]])])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200"},[...t[12]||(t[12]=[e("option",{value:"all"},"🏷️ Todos los estados",-1),e("option",{value:"draft"},"📝 Borrador",-1),e("option",{value:"scheduled"},"⏰ Programada",-1),e("option",{value:"sending"},"📤 Enviando",-1),e("option",{value:"sent"},"✅ Enviada",-1),e("option",{value:"paused"},"⏸️ Pausada",-1),e("option",{value:"cancelled"},"❌ Cancelada",-1)])],512),[[$,v.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plantilla",-1)),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200"},[t[14]||(t[14]=e("option",{value:"all"},"📄 Todas las plantillas",-1)),(a(!0),i(j,null,P(B.value,s=>(a(),i("option",{key:s.id,value:s.id},c(s.name),9,Le))),128))],512),[[$,f.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ordenar por",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>_.value=s),class:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200"},[...t[16]||(t[16]=[e("option",{value:"created_at"},"📅 Fecha de creación",-1),e("option",{value:"name"},"📝 Nombre",-1),e("option",{value:"status"},"🏷️ Estado",-1),e("option",{value:"sent_at"},"📤 Fecha de envío",-1)])],512),[[$,_.value]])])])]),e("div",Ve,[h.value?(a(),i("div",Be,[e("div",Me,[t[18]||(t[18]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-purple-200 border-t-purple-600"},null,-1)),e("div",De,[l(d(V),{class:"h-6 w-6 text-purple-600"})])]),t[19]||(t[19]=e("p",{class:"mt-4 text-gray-600 font-medium"},"Cargando campañas...",-1))])):y.value.length===0?(a(),i("div",je,[e("div",Pe,[l(d(V),{class:"h-10 w-10 text-purple-600"})]),t[21]||(t[21]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-3"},"No hay campañas disponibles",-1)),t[22]||(t[22]=e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"}," Comienza a hacer crecer tu negocio creando tu primera campaña de email marketing profesional ",-1)),l(n,{to:"/campaigns/new",class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"},{default:E(()=>[l(d(q),{class:"h-5 w-5 mr-2"}),t[20]||(t[20]=g(" Crear Primera Campaña ",-1))]),_:1})])):(a(),i("div",Ae,[(a(!0),i(j,null,P(y.value,(s,Q)=>(a(),i("div",{key:s.id,class:S(["group relative",{"border-b border-gray-200":Q<y.value.length-1}])},[e("div",Te,[e("div",Ne,[e("div",Ie,[e("div",qe,[e("div",{class:S([U(s.status),"p-2 rounded-xl shadow-md"])},[(a(),D(ee(R(s.status)),{class:"h-5 w-5 text-white"}))],2),e("div",Fe,[e("div",Oe,[e("h3",ze,c(s.name),1),e("span",{class:S([O(s.status),"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium shadow-sm w-fit"])},c(z(s.status)),3)]),e("div",Re,[e("div",Ue,[t[23]||(t[23]=e("div",{class:"text-xs font-medium text-gray-600 mb-1"},"👥 Contactos",-1)),e("div",He,c(s.total_contacts?.toLocaleString()||0),1)]),e("div",Ze,[t[24]||(t[24]=e("div",{class:"text-xs font-medium text-gray-600 mb-1"},"📤 Enviados",-1)),e("div",Ge,c(s.sent_count?.toLocaleString()||0),1)]),e("div",Ke,[t[25]||(t[25]=e("div",{class:"text-xs font-medium text-gray-600 mb-1"},"✅ Entregados",-1)),e("div",Qe,c(s.delivered_count?.toLocaleString()||0),1)]),e("div",Je,[t[26]||(t[26]=e("div",{class:"text-xs font-medium text-gray-600 mb-1"},"👀 Abiertos",-1)),e("div",We,c(s.opened_count?.toLocaleString()||0),1)])]),e("div",Xe,[s.created_at?(a(),i("span",Ye,[l(d(de),{class:"h-4 w-4 mr-1"}),g(" Creada: "+c(M(s.created_at)),1)])):L("",!0),s.sent_at?(a(),i("span",et,[l(d(N),{class:"h-4 w-4 mr-1"}),g(" Enviada: "+c(M(s.sent_at)),1)])):L("",!0)])])])]),e("div",tt,[e("div",st,[e("button",{onClick:C=>H(s),class:"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-all duration-200",title:"Ver detalles"},[l(d(re),{class:"h-5 w-5"})],8,ot),e("button",{onClick:C=>Z(s),class:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Editar campaña"},[l(d(ae),{class:"h-5 w-5"})],8,rt),s.status==="draft"?(a(),i("button",{key:0,onClick:C=>G(s),class:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Enviar campaña"},[l(d(N),{class:"h-5 w-5"})],8,at)):L("",!0),e("button",{onClick:C=>K(s),class:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Eliminar campaña"},[l(d(oe),{class:"h-5 w-5"})],8,nt)])])])])],2))),128))]))])])])]),_:1})}}};export{bt as default};
