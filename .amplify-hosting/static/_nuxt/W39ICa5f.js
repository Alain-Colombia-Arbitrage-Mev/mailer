const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CL2yjAnz.js","./D59wPe2Q.js"])))=>i.map(i=>d[i]);
import{h as b,r as v,e as P,n as g,u as E,c as l,i as y,a as e,j as V,k as d,l as c,v as f,m as p,t as n,d as h,b as S,w as L,o as i,_ as U}from"#entry";import{_ as q}from"./B8aq_QmG.js";const M={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},j={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},T={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B={class:"mt-1"},I={key:0,class:"mt-1 text-sm text-red-600"},R={class:"mt-1"},A={key:0,class:"mt-1 text-sm text-red-600"},D={class:"mt-1"},O={key:0,class:"mt-1 text-sm text-red-600"},H={class:"mt-1"},F={key:0,class:"mt-1 text-sm text-red-600"},J={class:"mt-1"},Y={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"rounded-md bg-red-50 p-4"},K={class:"flex"},Q={class:"ml-3"},W={class:"mt-2 text-sm text-red-700"},X=["disabled"],Z={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$={class:"mt-6"},ee={class:"mt-6"},re={__name:"register",setup(se){const a=b({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),u=v(!1),m=v(""),t=b({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),N=()=>{Object.keys(t).forEach(s=>{t[s]=""});let r=!0;return a.firstName.trim()||(t.firstName="El nombre es requerido",r=!1),a.lastName.trim()||(t.lastName="El apellido es requerido",r=!1),a.email?a.email.includes("@")||(t.email="Email inválido",r=!1):(t.email="El email es requerido",r=!1),a.password?a.password.length<6&&(t.password="La contraseña debe tener al menos 6 caracteres",r=!1):(t.password="La contraseña es requerida",r=!1),a.confirmPassword?a.password!==a.confirmPassword&&(t.confirmPassword="Las contraseñas no coinciden",r=!1):(t.confirmPassword="Confirma tu contraseña",r=!1),r},_=async()=>{if(N())try{u.value=!0,m.value="";const{useSupabase:r}=await U(async()=>{const{useSupabase:C}=await import("./CL2yjAnz.js");return{useSupabase:C}},__vite__mapDeps([0,1]),import.meta.url),s=r(),{data:x}=await s.from("USERS").select("email").eq("email",a.email.toLowerCase()).single();if(x){m.value="Este email ya está registrado";return}const{data:o,error:w}=await s.from("USERS").insert([{firstName:a.firstName.trim(),lastName:a.lastName.trim(),email:a.email.toLowerCase(),username:a.email.split("@")[0],Balance:0,kyc_status:"verified",kyc_level:"basic"}]).select().single();if(w){m.value="Error al crear usuario: "+w.message;return}const k={id:o.idPerson,email:o.email,firstName:o.firstName,lastName:o.lastName,username:o.username,verified:!0,loginTime:new Date().toISOString()};localStorage.setItem("mailpower_user",JSON.stringify(k)),await g("/dashboard")}catch(r){console.error("Register error:",r),m.value="Error al crear la cuenta. Inténtalo de nuevo."}finally{u.value=!1}};return P(()=>{localStorage.getItem("mailpower_user")&&g("/dashboard")}),E({title:"Crear Cuenta - MailPower"}),(r,s)=>{const x=q;return i(),l("div",M,[s[15]||(s[15]=y('<div class="sm:mx-auto sm:w-full sm:max-w-md"><div class="flex justify-center"><div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center"><svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></div></div><h2 class="mt-6 text-center text-3xl font-bold text-gray-900">MailPower</h2><p class="mt-2 text-center text-sm text-gray-600"> Crea tu cuenta nueva </p></div>',1)),e("div",j,[e("div",T,[e("form",{onSubmit:V(_,["prevent"]),class:"space-y-6"},[e("div",z,[e("div",null,[s[5]||(s[5]=e("label",{for:"firstName",class:"block text-sm font-medium text-gray-700"}," Nombre ",-1)),e("div",B,[c(e("input",{id:"firstName","onUpdate:modelValue":s[0]||(s[0]=o=>a.firstName=o),name:"firstName",type:"text",required:"",class:p(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":t.firstName}]),placeholder:"Tu nombre"},null,2),[[f,a.firstName]]),t.firstName?(i(),l("p",I,n(t.firstName),1)):d("",!0)])]),e("div",null,[s[6]||(s[6]=e("label",{for:"lastName",class:"block text-sm font-medium text-gray-700"}," Apellido ",-1)),e("div",R,[c(e("input",{id:"lastName","onUpdate:modelValue":s[1]||(s[1]=o=>a.lastName=o),name:"lastName",type:"text",required:"",class:p(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":t.lastName}]),placeholder:"Tu apellido"},null,2),[[f,a.lastName]]),t.lastName?(i(),l("p",A,n(t.lastName),1)):d("",!0)])])]),e("div",null,[s[7]||(s[7]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email ",-1)),e("div",D,[c(e("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=o=>a.email=o),name:"email",type:"email",autocomplete:"email",required:"",class:p(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":t.email}]),placeholder:"tu@email.com"},null,2),[[f,a.email]]),t.email?(i(),l("p",O,n(t.email),1)):d("",!0)])]),e("div",null,[s[8]||(s[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Contraseña ",-1)),e("div",H,[c(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=o=>a.password=o),name:"password",type:"password",autocomplete:"new-password",required:"",class:p(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":t.password}]),placeholder:"Tu contraseña"},null,2),[[f,a.password]]),t.password?(i(),l("p",F,n(t.password),1)):d("",!0)])]),e("div",null,[s[9]||(s[9]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"}," Confirmar Contraseña ",-1)),e("div",J,[c(e("input",{id:"confirmPassword","onUpdate:modelValue":s[4]||(s[4]=o=>a.confirmPassword=o),name:"confirmPassword",type:"password",autocomplete:"new-password",required:"",class:p(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":t.confirmPassword}]),placeholder:"Confirma tu contraseña"},null,2),[[f,a.confirmPassword]]),t.confirmPassword?(i(),l("p",Y,n(t.confirmPassword),1)):d("",!0)])]),m.value?(i(),l("div",G,[e("div",K,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Q,[s[10]||(s[10]=e("h3",{class:"text-sm font-medium text-red-800"},"Error al registrarse",-1)),e("div",W,[e("p",null,n(m.value),1)])])])])):d("",!0),e("div",null,[e("button",{type:"submit",disabled:u.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[u.value?(i(),l("svg",Z,[...s[12]||(s[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),h(" "+n(u.value?"Creando cuenta...":"Crear cuenta"),1)],8,X)])],32),e("div",$,[s[14]||(s[14]=y('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">¿Ya tienes cuenta?</span></div></div>',1)),e("div",ee,[S(x,{to:"/login",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},{default:L(()=>[...s[13]||(s[13]=[h(" Iniciar sesión ",-1)])]),_:1})])])])])])}}};export{re as default};
