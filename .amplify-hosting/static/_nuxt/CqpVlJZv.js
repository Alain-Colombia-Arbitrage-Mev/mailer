import{a1 as r,n as s}from"#entry";const d=r((i,t)=>{try{console.log("ğŸ” Simple-auth middleware ejecutÃ¡ndose para:",i.path);const o=localStorage.getItem("admin_session");if(console.log("ğŸ“¦ Datos en localStorage:",o?"Encontrados":"No encontrados"),!o)return console.log("ğŸš« No hay sesiÃ³n, redirigiendo a login..."),s("/auth/simple-login");const e=JSON.parse(o);console.log("ğŸ‘¤ Datos de sesiÃ³n:",{hasUser:!!e.user,userEmail:e.user?.email,isAdmin:e.user?.isAdmin,timestamp:e.timestamp,age:Date.now()-(e.timestamp||0)});const n=Date.now()-(e.timestamp||0),a=1440*60*1e3;if(n>a)return console.log("ğŸ•’ SesiÃ³n expirada, eliminando y redirigiendo..."),localStorage.removeItem("admin_session"),s("/auth/simple-login");if(!e.user||!e.user.isAdmin)return console.log("ğŸš« Usuario no admin, redirigiendo a login...",{hasUser:!!e.user,isAdmin:e.user?.isAdmin}),s("/auth/simple-login");console.log("âœ… Usuario autenticado, permitiendo acceso a:",i.path)}catch(o){return console.error("âŒ Error verificando autenticaciÃ³n:",o),localStorage.removeItem("admin_session"),s("/auth/simple-login")}});export{d as default};
