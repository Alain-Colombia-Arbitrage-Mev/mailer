import{a1 as s,n as r}from"#entry";const c=s((t,i)=>{try{console.log(`🔍 [${new Date().toLocaleTimeString()}] Middleware verificando: ${t.path}`);const o=localStorage.getItem("auth_status"),a=localStorage.getItem("admin_session");if(console.log("🔍 Estado localStorage:",{authStatus:o,hasSession:!!a,path:t.path}),o==="authenticated"&&a)try{const e=JSON.parse(a);if(e.isAuthenticated&&e.user&&e.user.email){console.log("✅ [MIDDLEWARE] Usuario autenticado:",e.user.email);return}}catch(e){console.error("❌ Error parsing session:",e)}return console.log("🚫 [MIDDLEWARE] NO autenticado, redirigiendo a /login"),r("/login")}catch(o){return console.error("❌ Error en middleware:",o),r("/login")}});export{c as default};
